# 番茄时钟 (Qt Pomodoro Timer)

一个功能丰富的桌面番茄时钟应用程序，使用 Qt6 框架和 C++ 编写，专为 macOS 优化。

## 🌟 功能特性

### 核心功能
- ⏰ **智能计时**: 25分钟工作 + 5分钟休息，可自定义配置
- 🪟 **浮动窗口**: 置顶显示的动态倒计时，支持拖拽定位
- 📝 **主题记录**: 为每个番茄钟记录工作主题，支持导出
- 🎨 **主题切换**: 深色/浅色主题，护眼舒适

### 系统集成
- 📌 **系统托盘**: 后台运行，双击显示/隐藏主窗口
- 🔒 **自动锁屏**: 休息开始时自动锁屏（可选）
- 🔔 **提醒通知**: 工作/休息切换时的声音和弹窗提醒
- 🎯 **实时倒计时**: 托盘图标和浮动窗口实时同步

### 用户体验
- 🖱️ **拖拽移动**: 浮动窗口支持鼠标拖拽定位
- 💾 **配置持久化**: 主题、窗口位置、设置自动保存
- 📊 **统计显示**: 显示已完成的番茄钟周期数
- 🔄 **快速操作**: 开始、暂停、重置、浮动窗口开关

## 🚀 快速开始

### 环境要求
- macOS Sequoia 或更高版本
- Qt6 开发环境
- C++17 兼容编译器

### 编译运行
```bash
# 1. 克隆仓库
git clone <your-repo-url>
cd fanqie

# 2. 编译项目
qmake && make

# 3. 运行程序
./qt_pomodoro.app/Contents/MacOS/qt_pomodoro
```

### 一键运行（推荐）
```bash
# 编译并后台运行
qmake && make && nohup ./qt_pomodoro.app/Contents/MacOS/qt_pomodoro &
```

## 📖 使用指南

### 基本操作
1. **开始计时**: 点击"开始"按钮
2. **暂停/继续**: 点击"暂停"/"继续"按钮
3. **重置计时**: 点击"重置"按钮回到初始状态
4. **浮动窗口**: 点击"浮动窗口"显示/隐藏置顶计时器

### 主题记录功能
1. **输入主题**: 在底部输入框输入工作内容
2. **保存主题**: 点击"保存主题"记录当前工作
3. **界面显示**: 主界面"工作阶段"自动替换为主题内容
4. **导出记录**: 点击"导出记录"导出最近一周的工作记录

### 浮动窗口操作
- **拖拽移动**: 按住浮动窗口任意位置拖拽
- **位置重置**: 点击主界面"位置重置"回到默认位置
- **自动置顶**: 始终显示在最前，不干扰其他工作

## 🏗️ 项目结构

```
fanqie/
├── main.cpp              # 程序入口点
├── mainwindow.h/cpp     # 主窗口类实现
├── floating_timer.h/cpp # 浮动窗口类实现
├── reminder_dialog.h/cpp # 提醒对话框类
├── mainwindow.ui        # 主界面布局文件
├── resources.qrc        # 资源文件（预留）
├── qt_pomodoro.pro      # Qt项目配置文件
└── README.md           # 项目说明文档
```

## 🔧 技术架构

### 核心技术栈
- **Qt6框架**: 跨平台GUI应用开发
- **C++17**: 现代C++特性，类型安全
- **QSystemTrayIcon**: 系统托盘集成
- **QSettings**: 配置数据持久化
- **QTimer/QPainter**: 精确计时和自定义绘制

### 关键特性
- **信号槽机制**: 松耦合的事件处理
- **自定义绘制**: 托盘图标和浮动窗口的美观显示
- **异步操作**: 非阻塞的UI响应
- **配置管理**: 用户设置的自动保存和加载

## 🎯 配置文件

应用自动保存以下配置到系统设置：
- 工作/休息时间设置
- 主题偏好（深色/浅色）
- 浮动窗口位置
- 自动锁屏开关
- 主题记录数据

## 📦 部署说明

### 开发环境搭建
```bash
# 安装Qt6（通过Homebrew）
brew install qt

# 设置环境变量
export PATH="/opt/homebrew/opt/qt/bin:$PATH"
```

### 发布版本
项目使用标准的Qt部署流程，可通过macOS的`macdeployqt`工具打包为独立应用。

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进项目！

### 开发规范
- 遵循Qt编码规范
- 保持代码注释清晰
- 新增功能需包含测试用例
- 提交前确保所有功能正常工作

## 📄 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 🙏 致谢

感谢所有为这个项目提供建议和反馈的用户！

---

**开始高效工作，享受专注时光！** 🚀